apiVersion: v1
kind: ConfigMap
metadata:
  name: artemis-config
  namespace: artemis
  labels:
    app.kubernetes.io/name: artemis
data:
  # ARTEMIS BGP Configuration for AS214304
  config.yaml: |
    prefixes:
      nuclear_lighters_v6: &nuclear_lighters_v6
        - 2a0c:9a40:8e20::/48

    asns:
      nuclear_lighters: &nuclear_lighters
        - 214304

    monitors:
      riperis:
        - rrc00    # Amsterdam
        - rrc03    # Amsterdam
        - rrc12    # Frankfurt
        - rrc21    # Paris
        - rrc25    # Amsterdam
      bgpstreamlive:
        - routeviews
        - ris

    rules:
      - prefixes:
          - *nuclear_lighters_v6
        origin_asns:
          - *nuclear_lighters
        neighbors:
          - 34927   # iFog GmbH (transit)
          - 56655   # Terrahost AS (transit)

  # Environment configuration
  artemis.env: |
    # General
    GUI_ENABLED=true
    HISTORIC=false
    
    # Database
    DB_HOST=postgres
    DB_PORT=5432
    DB_NAME=artemis_db
    DB_USER=artemis_user
    DB_SCHEMA=public
    DB_VERSION=24
    DB_AUTOCLEAN=false
    DB_BACKUP=true
    
    # Redis
    REDIS_HOST=redis
    REDIS_PORT=6379
    
    # RabbitMQ
    RABBITMQ_HOST=rabbitmq
    RABBITMQ_PORT=5672
    RABBITMQ_USER=guest
    
    # MongoDB
    MONGODB_HOST=mongodb
    MONGODB_PORT=27017
    MONGODB_NAME=artemis-web
    MONGODB_USER=admin
    
    # Hasura/GraphQL
    HASURA_HOST=graphql
    HASURA_PORT=8080
    HASURA_GUI=false
    
    # API
    API_HOST=postgrest
    API_PORT=3000
    REST_PORT=3000
    
    # Frontend
    WEBAPP_HOST=frontend
    WEBAPP_PORT=4200
    ADMIN_EMAIL=artemis@mxmx.email
    SESSION_TIMEOUT=1800
    INACTIVITY_TIMEOUT=900
    
    # Monitor
    MON_TIMEOUT_LAST_BGP_UPDATE=3600
    
    # RPKI (disabled for now)
    RPKI_VALIDATOR_ENABLED=false
