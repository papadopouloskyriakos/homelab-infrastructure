***REMOVED***
# ARTEMIS BGP Hijack Detection - Helm Values
# Nuclear Lighters Infrastructure - NL Site
***REMOVED***

# General settings
guiEnabled: true
systemVersion: latest
historic: false

# Autostarter check interval (seconds)
checkInterval: 5

***REMOVED***
# Database Configuration
***REMOVED***
dbHost: postgres
dbPort: 5432
dbVersion: 24
dbName: artemis_db
dbUser: artemis_user
# Password will be injected via ExternalSecret
dbPass: ""
dbSchema: public
dbAutoClean: false
dbBackup: true
dbHijackDormant: false

***REMOVED***
# Frontend Configuration
***REMOVED***
webappHost: frontend
webappPort: 4200
# Admin credentials will be injected via ExternalSecret
adminPass: ""
adminEmail: admin@example.net
sessionTimeout: 1800
inactivityTimeout: 900
limitWindow: 900000
limitRequests: 20
captchaWindow: 900000
captchaTries: 4

***REMOVED***
# MongoDB Configuration
***REMOVED***
mongodbUser: admin
# Password will be injected via ExternalSecret
mongodbPass: ""
mongodbHost: mongodb
mongodbPort: 27017
mongodbName: artemis-web

***REMOVED***
# LDAP Configuration (integrate with FreeIPA if desired)
***REMOVED***
ldapEnabled: false
# Enable and configure if integrating with FreeIPA:
# ldapHost: ipa.example.net
# ldapPort: 389
# ldapProtocol: ldap
# ldapBindDN: "cn=admin,dc=nuclearlighters,dc=net"
# ldapSearchBase: "cn=users,cn=accounts,dc=nuclearlighters,dc=net"
# ldapSearchFilter: "(uid={{username}})"
# ldapSearchAttributes: "mail,uid"

***REMOVED***
# RabbitMQ Configuration
***REMOVED***
rabbitmqHost: rabbitmq
rabbitmqPort: 5672
rabbitmqUser: guest
# Password will be injected via ExternalSecret
rabbitmqPass: ""
rabbitmqIoThreadPoolSize: 128

***REMOVED***
# Hasura GraphQL Configuration
***REMOVED***
hasuraHost: graphql
hasuraPort: 8080
hasuraGui: false

***REMOVED***
# Monitor Configuration
***REMOVED***
# Timeout (sec) since last seen BGP update for monitors
monTimeoutLastBgpUpdate: 3600

# RIPE RIS collector ID (default: rrc00)
risId: 8522

***REMOVED***
# Hijack Detection Configuration
***REMOVED***
# Custom log filter for hijack events
hijackLogFilter: '[{"community_annotation":"critical"},{"community_annotation":"NA"}]'

# Fields to preserve in hijack logs
hijackLogFields: '["prefix","hijack_as","type","time_started","time_last","peers_seen","configured_prefix","timestamp_of_config","asns_inf","time_detected","key","community_annotation","rpki_status","end_tag","outdated_parent","hijack_url"]'

# Percentage of monitor peers required to see withdrawals to declare hijack as withdrawn
withdrawnHijackThreshold: 80

***REMOVED***
# RPKI Validation (integrate with routinator if available)
***REMOVED***
rpkiValidatorEnabled: false
# Enable if running routinator:
# rpkiValidatorHost: routinator
# rpkiValidatorPort: 3323

***REMOVED***
# Environment Configuration
***REMOVED***
testEnv: false
autoRecoverProcessState: true

***REMOVED***
# Service Images (using defaults from inspiregroup)
***REMOVED***
services:
  riperistap:
    image: inspiregroup/artemis-riperistap
    replicas: 1
    ports:
      - 3000
  bgpstreamlivetap:
    image: inspiregroup/artemis-bgpstreamlivetap
    replicas: 1
    ports:
      - 3000
  bgpstreamkafkatap:
    image: inspiregroup/artemis-bgpstreamkafkatap
    replicas: 1
    ports:
      - 3000
  bgpstreamhisttap:
    image: inspiregroup/artemis-bgpstreamhisttap
    replicas: 1
    ports:
      - 3000
  exabgptap:
    image: inspiregroup/artemis-exabgptap
    replicas: 1
    ports:
      - 3000
  autoignore:
    image: inspiregroup/artemis-autoignore
    replicas: 1
    ports:
      - 3000
  autostarter:
    image: inspiregroup/artemis-autostarter
    replicas: 1
    ports:
      - 3000
  configuration:
    image: inspiregroup/artemis-configuration
    replicas: 1
    ports:
      - 3000
  database:
    image: inspiregroup/artemis-database
    replicas: 1
    ports:
      - 3000
  detection:
    image: inspiregroup/artemis-detection
    replicas: 1
    ports:
      - 3000
  fileobserver:
    image: inspiregroup/artemis-fileobserver
    replicas: 1
    ports:
      - 3000
  mitigation:
    image: inspiregroup/artemis-mitigation
    replicas: 1
    ports:
      - 3000
  notifier:
    image: inspiregroup/artemis-notifier
    replicas: 1
    ports:
      - 3000
  prefixtree:
    image: inspiregroup/artemis-prefixtree
    replicas: 1
    ports:
      - 3000
  frontend:
    image: inspiregroup/artemis-frontend-web
    replicas: 1
    ports:
      - 4200
  redis:
    image: redis:7-alpine
    ports:
      - 6379
  postgrest:
    image: postgrest/postgrest:v10.0.0
    ports:
      - 3000
  postgres:
    image: timescale/timescaledb:2.8.1-pg14
    ports:
      - 5432
  rabbitmq:
    image: rabbitmq:3.9.20-management-alpine
    ports:
      - 5672
  graphql:
    image: hasura/graphql-engine:v2.10.2
    ports:
      - 8080
  pgamqpbridge:
    image: curiouzk0d3r/pg-amqp-bridge:latest
  mongodb:
    image: mongo:4.4.6-bionic
    ports:
      - 27017

***REMOVED***
# Ingress Configuration
***REMOVED***
ingress:
  enabled: true
  host: artemis.example.net
  tlsEnabled: true
  annotations:
    kubernetes.io/ingress.class: nginx
    cert-manager.io/cluster-issuer: letsencrypt-prod
    nginx.ingress.kubernetes.io/proxy-body-size: "50m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
  graphql:
    annotations:
      nginx.ingress.kubernetes.io/rewrite-target: /v1alpha1/graphql
  frontend:
    annotations: {}

***REMOVED***
# Persistent Volume Configuration
***REMOVED***
pvc:
  storage: 10Gi
  storageClassName: nfs-client
  accessMode: ReadWriteOnce
  annotations:
    helm.sh/resource-policy: "keep"

***REMOVED***
# Node Selector (schedule on worker nodes)
***REMOVED***
nodeSelector:
  node-role.kubernetes.io/worker: "worker"

***REMOVED***
# Health Probes
***REMOVED***
probes:
  livenessProbe:
    httpGet:
      path: /health
      port: 3000
    failureThreshold: 3
    periodSeconds: 30
    initialDelaySeconds: 60
  readinessProbe:
    httpGet:
      path: /health
      port: 3000
    failureThreshold: 3
    periodSeconds: 10
    initialDelaySeconds: 30

***REMOVED***
***REMOVED***
# Secrets (required by helm chart)
***REMOVED***
hasuraSecret: "OWsBkRuAeTGsPTauickOqI29Az84HONuNkGnhHqLtQt8gZq1nB8b8tne1sKZL2L8
atmkaCz7D01Pt7LPZ4GRsQ=="
jwtSecret: "IVxxbRLFXUXu1oGpiW2HzyOvTAck4BS0nwB1utnH1gzM9O+an15oTo5G7EuVOgTC
3GxhQw9jcPFXI6lEs59g4w=="
csrfSecret: "wtrDA5YC6ay5lWLDxNpSthXku31FmL0ImyRVarbi9us="
apiKey: "d1iXo/x+1HBws3pSSnNwVoA4DWXqcNdD2/i8nZNflas="
captchaSecret: "VROAsvD7a9h7yHKBydGTkqUnPt+uJfOBi6fl0M0zSTU="
