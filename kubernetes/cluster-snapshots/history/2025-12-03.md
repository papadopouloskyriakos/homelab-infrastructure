# K8s Cluster Snapshot

**Date:** 2025-12-03 03:00:01 UTC | **Host:** nlk8s-ctrl01 | **Version:** 3.1.0

> ðŸ“– Full documentation: [Nuclear Lighters Infrastructure README](https://gitlab.example.net/infrastructure/nl/production/-/blob/main/README.md)

## Health Status: âœ… HEALTHY

| Check | Status |
|-------|--------|
| Unhealthy Pods | 0 |
| Pending PVCs | 0 |
| Warning Events (last 1h) | 55 |

## Overview

| Metric | Value |
|--------|-------|
| K8s Version | v1.34.2 |
| Nodes | 7 (3 ctrl, 4 workers) |
| Pods | 104 |
| Services | 61 |
| PVCs | 11 |
| Helm Releases | 11 |

## Custom Resources

| Resource | Count |
|----------|-------|
| ArgoCD Applications | 3 |
| External Secrets | 12 |
| Certificates | 1 |

## Nodes
```
NAME                 STATUS   ROLES           AGE   VERSION   INTERNAL-IP     EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION      CONTAINER-RUNTIME
nlk8s-ctrl01   Ready    control-plane   29d   v1.34.2   10.0.X.X   <none>        Ubuntu 24.04.3 LTS   6.14.0-36-generic   containerd://2.1.5
nlk8s-ctrl02   Ready    control-plane   27d   v1.34.2   10.0.X.X   <none>        Ubuntu 24.04.3 LTS   6.17.2-2-pve        containerd://2.1.5
nlk8s-ctrl03   Ready    control-plane   29d   v1.34.2   10.0.X.X   <none>        Ubuntu 24.04.3 LTS   6.14.0-36-generic   containerd://2.1.5
nlk8s-node01    Ready    worker          28d   v1.34.2   10.0.X.X   <none>        Ubuntu 24.04.3 LTS   6.8.0-88-generic    containerd://2.1.5
nlk8s-node02    Ready    worker          28d   v1.34.2   10.0.X.X   <none>        Ubuntu 24.04.3 LTS   6.8.0-88-generic    containerd://2.1.5
nlk8s-node03    Ready    worker          28d   v1.34.2   10.0.X.X   <none>        Ubuntu 24.04.3 LTS   6.8.0-88-generic    containerd://2.1.5
nlk8s-node04    Ready    worker          28d   v1.34.2   10.0.X.X   <none>        Ubuntu 24.04.3 LTS   6.8.0-88-generic    containerd://2.1.5
```

## Unhealthy Pods
```
None - all pods healthy!
```

## Deployments
```
NAMESPACE                NAME                                              READY   UP-TO-DATE   AVAILABLE   AGE
argocd                   argocd-applicationset-controller                  1/1     1            1           7d8h
argocd                   argocd-redis                                      1/1     1            1           7d8h
argocd                   argocd-repo-server                                2/2     2            2           7d8h
argocd                   argocd-server                                     2/2     2            2           7d8h
awx                      awx-operator-controller-manager                   1/1     1            1           28d
awx                      my-awx-task                                       1/1     1            1           28d
awx                      my-awx-web                                        1/1     1            1           28d
bentopdf                 bentopdf                                          1/1     1            1           3d12h
cert-manager             cert-manager                                      1/1     1            1           2d7h
cert-manager             cert-manager-cainjector                           1/1     1            1           2d7h
cert-manager             cert-manager-webhook                              1/1     1            1           2d7h
external-secrets         external-secrets                                  1/1     1            1           3d7h
external-secrets         external-secrets-cert-controller                  1/1     1            1           3d7h
external-secrets         external-secrets-webhook                          1/1     1            1           3d7h
REDACTED_01b50c5d   REDACTED_ab04b573-v2                         2/2     2            2           8d
ingress-nginx            ingress-nginx-controller                          2/2     2            2           27d
kube-system              cilium-operator                                   1/1     1            1           4d13h
kube-system              coredns                                           2/2     2            2           29d
kube-system              hubble-relay                                      1/1     1            1           4d13h
kube-system              hubble-ui                                         1/1     1            1           4d13h
kube-system              metrics-server                                    1/1     1            1           28d
REDACTED_d97cef76     dashboard-metrics-scraper                         1/1     1            1           27d
REDACTED_d97cef76     REDACTED_d97cef76                              1/1     1            1           27d
minio                    minio                                             1/1     1            1           8d
monitoring               monitoring-grafana                                2/2     2            2           5d7h
monitoring               monitoring-kube-prometheus-operator               1/1     1            1           27d
monitoring               monitoring-kube-state-metrics                     1/1     1            1           27d
nfs-provisioner          nfs-provisioner-REDACTED_5fef70be   1/1     1            1           27d
pihole                   pihole                                            1/1     1            1           3d9h
velero                   velero                                            1/1     1            1           7d7h
velero                   velero-ui                                         1/1     1            1           7d7h
```

## StatefulSets
```
NAMESPACE      NAME                                                   READY   AGE
argocd         argocd-application-controller                          1/1     7d8h
awx            my-awx-postgres-15                                     1/1     28d
cilium-spire   spire-server                                           1/1     4d3h
logging        loki                                                   1/1     2d12h
monitoring     alertmanager-monitoring-kube-prometheus-alertmanager   2/2     5d7h
monitoring     prometheus-REDACTED_6dfbe9fc       2/2     5d8h
synology-csi   synology-csi-controller                                1/1     5d10h
```

## Services (LoadBalancer)
```
NAMESPACE       NAME                       TYPE           CLUSTER-IP       EXTERNAL-IP     PORT(S)                      AGE
ingress-nginx   ingress-nginx-controller   LoadBalancer   10.103.32.106    10.0.X.X   80:31689/TCP,443:30327/TCP   27d
kube-system     hubble-relay-lb            LoadBalancer   10.110.32.130    10.0.X.X   80:30629/TCP                 4d6h
logging         promtail-syslog            LoadBalancer   10.105.64.19     10.0.X.X   514:30623/TCP                2d1h
pihole          pihole-dns-lb              LoadBalancer   10.99.196.72     10.0.X.X   53:31803/UDP                 4d5h
pihole          pihole-dns-tcp-lb          LoadBalancer   10.106.199.199   10.0.X.X   53:30438/TCP                 4d5h
```

## Ingresses
```
NAMESPACE              NAME                   CLASS   HOSTS                          ADDRESS         PORTS     AGE
argocd                 argocd-server          nginx   argocd.example.net     10.0.X.X   80, 443   7d8h
awx                    awx                    nginx   awx.example.net        10.0.X.X   80        6d3h
bentopdf               bentopdf               nginx   bentopdf.example.net   10.0.X.X   80        3d12h
kube-system            hubble-ui              nginx   hubble.example.net     10.0.X.X   80, 443   4d12h
REDACTED_d97cef76   REDACTED_d97cef76   nginx   k8s.example.net        10.0.X.X   80        6d3h
minio                  minio-console          nginx   minio.example.net      10.0.X.X   80        8d
monitoring             grafana                nginx   grafana.example.net    10.0.X.X   80        6d3h
pihole                 pihole-ingress         nginx   pihole.example.net     10.0.X.X   80        8d
velero                 velero-ui              nginx   velero.example.net     10.0.X.X   80        7d7h
```

## PVCs
```
NAMESPACE      NAME                                                                                                             STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS                              VOLUMEATTRIBUTESCLASS   AGE
awx            my-awx-projects                                                                                                  Bound    awx-projects-pv                            50Gi       RWX            nfs-sc                                    <unset>                 28d
awx            REDACTED_0d7ca6a5                                                                                 Bound    REDACTED_c7d87e23   50Gi       RWO            REDACTED_b280aec5   <unset>                 5d6h
cilium-spire   spire-data-spire-server-0                                                                                        Bound    pvc-6f3da11a-d6a0-4cd0-8f14-d35dfd334075   1Gi        RWO            nfs-client                                <unset>                 4d3h
logging        storage-loki-0                                                                                                   Bound    pvc-ead084c7-26e8-459a-99f8-93ffb62b82e9   10Gi       RWO            REDACTED_4f3da73d   <unset>                 2d12h
minio          minio-data-csi                                                                                                   Bound    pvc-7ed8ddf6-ff5f-4a09-87b3-add99604e608   1Ti        RWO            REDACTED_b280aec5   <unset>                 5d9h
monitoring     alertmanager-monitoring-kube-prometheus-alertmanager-db-alertmanager-monitoring-kube-prometheus-alertmanager-0   Bound    REDACTED_3f07e323   10Gi       RWO            REDACTED_4f3da73d   <unset>                 5d7h
monitoring     alertmanager-monitoring-kube-prometheus-alertmanager-db-alertmanager-monitoring-kube-prometheus-alertmanager-1   Bound    REDACTED_c70a75d3   10Gi       RWO            REDACTED_4f3da73d   <unset>                 5d7h
monitoring     monitoring-grafana                                                                                               Bound    pvc-55805781-0f58-4d80-9074-a62cec165932   20Gi       RWO            nfs-client                                <unset>                 5d7h
monitoring     prometheus-REDACTED_6dfbe9fc-db-prometheus-REDACTED_6dfbe9fc-0           Bound    REDACTED_b1b2f2d4   200Gi      RWO            REDACTED_4f3da73d   <unset>                 5d8h
monitoring     prometheus-REDACTED_6dfbe9fc-db-prometheus-REDACTED_6dfbe9fc-1           Bound    REDACTED_628b3ba4   200Gi      RWO            REDACTED_4f3da73d   <unset>                 5d8h
pihole         pihole-data                                                                                                      Bound    pvc-b45463d9-aa5b-483e-92b8-54fee6635219   1Gi        RWO            nfs-client                                <unset>                 8d
```

## Helm Releases
```
NAME            	NAMESPACE             	REVISION	UPDATED                                	STATUS  	CHART                                 	APP VERSION
argocd          	argocd                	3       	2025-11-29 02:18:52.98547378 +0000 UTC 	deployed	argo-cd-7.7.10                        	v2.13.2    
cert-manager    	cert-manager          	3       	2025-11-30 21:22:09.520251302 +0000 UTC	deployed	cert-manager-v1.17.1                  	v1.17.1    
cilium          	kube-system           	8       	2025-12-02 22:13:01.778472201 +0000 UTC	deployed	cilium-1.18.4                         	1.18.4     
external-secrets	external-secrets      	1       	2025-11-29 19:53:58.182715236 +0000 UTC	deployed	external-secrets-0.12.1               	v0.12.1    
ingress-nginx   	ingress-nginx         	6       	2025-11-30 20:29:39.171185711 +0000 UTC	deployed	ingress-nginx-4.14.0                  	1.14.0     
k8s-agent       	REDACTED_01b50c5d	6       	2025-11-29 02:18:29.271243252 +0000 UTC	deployed	gitlab-agent-2.21.1                   	v18.6.1    
loki            	logging               	2       	2025-12-01 01:16:24.090060483 +0000 UTC	deployed	loki-6.46.0                           	3.5.7      
monitoring      	monitoring            	17      	2025-12-01 21:21:45.662633308 +0000 UTC	deployed	REDACTED_d8074874-79.10.0         	v0.86.2    
nfs-provisioner 	nfs-provisioner       	8       	2025-11-29 02:18:25.900770326 +0000 UTC	deployed	REDACTED_5fef70be-4.0.18	4.0.2      
promtail        	logging               	4       	2025-12-01 01:45:36.092885959 +0000 UTC	deployed	promtail-6.17.1                       	3.5.1      
synology-csi    	synology-csi          	2       	2025-11-29 02:18:25.854988376 +0000 UTC	deployed	synology-csi-0.10.1                   	v1.2.0     
```

## ArgoCD Applications
```
NAMESPACE   NAME       SYNC STATUS   HEALTH STATUS
argocd      bentopdf   Unknown       Healthy
argocd      pihole     Unknown       Healthy
argocd      velero     Unknown       Healthy
```

## Velero Schedules
```
NAME            STATUS    SCHEDULE    LASTBACKUP   AGE    PAUSED
daily-backup    Enabled   0 2 * * *   60m          7d7h   
weekly-backup   Enabled   0 3 * * 0   2d23h        7d7h   
```

## Warning Events (Recent)
```
NAMESPACE      LAST SEEN   TYPE      REASON                         OBJECT                                                      MESSAGE
awx            144m        Warning   FailedToUpdateEndpoint         endpoints/REDACTED_ce3f365d   Failed to update endpoint awx/REDACTED_ce3f365d: etcdserver: request timed out
awx            144m        Warning   FailedToUpdateEndpointSlices   service/REDACTED_ce3f365d     Error updating Endpoint Slices for Service awx/REDACTED_ce3f365d: failed to update REDACTED_ce3f365d-hzvgz EndpointSlice for Service awx/REDACTED_ce3f365d: etcdserver: request timed out
kube-system    144m        Warning   Unhealthy                      pod/kube-scheduler-nlk8s-ctrl03                       Readiness probe failed: Get "https://127.0.0.1:10259/readyz": dial tcp 127.0.0.1:10259: connect: connection refused
awx            144m        Warning   FailedToUpdateEndpoint         endpoints/REDACTED_ce3f365d   Failed to update endpoint awx/REDACTED_ce3f365d: Operation cannot be fulfilled on endpoints "REDACTED_ce3f365d": the object has been modified; please apply your changes to the latest version and try again
awx            144m        Warning   FailedToUpdateEndpointSlices   service/REDACTED_ce3f365d     Error updating Endpoint Slices for Service awx/REDACTED_ce3f365d: failed to update REDACTED_ce3f365d-hzvgz EndpointSlice for Service awx/REDACTED_ce3f365d: Operation cannot be fulfilled on endpointslices.discovery.k8s.io "REDACTED_ce3f365d-hzvgz": the object has been modified; please apply your changes to the latest version and try again
awx            144m        Warning   BackOff                        pod/awx-operator-controller-manager-79499d9678-hr474        Back-off restarting failed container awx-manager in pod awx-operator-controller-manager-79499d9678-hr474_awx(a2b540d6-7fe0-480b-98be-1b398eec88c4)
kube-system    104m        Warning   Unhealthy                      pod/kube-scheduler-nlk8s-ctrl02                       Readiness probe failed: Get "https://127.0.0.1:10259/readyz": dial tcp 127.0.0.1:10259: connect: connection refused
kube-system    104m        Warning   Unhealthy                      pod/cilium-operator-67ff4f447c-7zv95                        Readiness probe failed: Get "http://127.0.0.1:9234/healthz": EOF
monitoring     103m        Warning   Unhealthy                      pod/monitoring-grafana-6ff995d97c-f8rwv                     Liveness probe failed: Get "http://10.0.2.237:3000/api/health": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
monitoring     103m        Warning   Unhealthy                      pod/monitoring-grafana-6ff995d97c-f8rwv                     Readiness probe failed: Get "http://10.0.2.237:3000/api/health": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
monitoring     103m        Warning   Unhealthy                      pod/monitoring-grafana-6ff995d97c-hsfcm                     Liveness probe failed: Get "http://10.0.6.64:3000/api/health": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
kube-system    103m        Warning   Unhealthy                      pod/etcd-nlk8s-ctrl01                                 Readiness probe failed: HTTP probe failed with statuscode: 503
kube-system    103m        Warning   Unhealthy                      pod/kube-apiserver-nlk8s-ctrl02                       Liveness probe failed: HTTP probe failed with statuscode: 500
kube-system    103m        Warning   Unhealthy                      pod/kube-apiserver-nlk8s-ctrl02                       Readiness probe failed: HTTP probe failed with statuscode: 500
```

---
*Generated by k8s-cluster-snapshot.sh v3.1.0*
